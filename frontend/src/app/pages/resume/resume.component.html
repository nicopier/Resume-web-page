<div class="p-4">
  <h2 class="mb-4" i18n>Mis Resumes</h2>

  <div *ngIf="loading(); else tabla" i18n>Cargando...</div>

  <ng-template #tabla>
    <div *ngIf="data().length === 0; else conDatos" class="empty">
      <p i18n>Todavía no creaste ningún resume.</p>
      <a mat-stroked-button color="primary" [routerLink]="['/crear-resume']" i18n>
        Crear Resume
      </a>
    </div>

    <ng-template #conDatos>
      <table mat-table [dataSource]="data()" class="mat-elevation-z2 full-width">

        <!-- ID -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef i18n>CV</th>
          <td mat-cell *matCellDef="let r">#{{ r.id }}</td>
        </ng-container>

        <!-- Actualizado -->
        <ng-container matColumnDef="updated">
          <th mat-header-cell *matHeaderCellDef i18n>Actualizado</th>
          <td mat-cell *matCellDef="let r">{{ r.updated_at | date:'short' }}</td>
        </ng-container>

        <!-- Acciones -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef i18n>Acciones</th>
          <td mat-cell *matCellDef="let r" class="actions">
            <button mat-stroked-button color="primary" (click)="editar(r.id)" i18n>
              <mat-icon>edit</mat-icon>&nbsp;Editar
            </button>
            <button mat-stroked-button (click)="descargar(r.id)" i18n>
              <mat-icon>download</mat-icon>&nbsp;Descargar
            </button>
            <button mat-stroked-button color="warn" (click)="eliminar(r.id)" i18n>
              <mat-icon>delete</mat-icon>&nbsp;Eliminar
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </ng-template>
  </ng-template>
</div>
