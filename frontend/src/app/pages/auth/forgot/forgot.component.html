<div class="forgot-wrap">
  <h1 i18n="@@forgot.title">¿Olvidaste tu contraseña?</h1>
  <p i18n="@@forgot.subtitle">
    Escribí tu email y te enviaremos un enlace para restablecerla.
  </p>

  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <label for="email" i18n="@@forgot.label.email">Email</label>
    <input
      id="email"
      type="email"
      formControlName="email"
      [class.invalid]="f.email.touched && f.email.invalid"
      autocomplete="email"
    />

    <div class="err" *ngIf="f.email.touched && f.email.invalid">
      <span *ngIf="f.email.errors?.['required']" i18n="@@forgot.error.required">
        El email es obligatorio.
      </span>
      <span *ngIf="f.email.errors?.['email']" i18n="@@forgot.error.format">
        Formato de email inválido.
      </span>
    </div>

    <button type="submit" [disabled]="loading || form.invalid">
      <ng-container *ngIf="!loading" i18n="@@forgot.button">Enviar enlace</ng-container>
      <ng-container *ngIf="loading" i18n="@@forgot.sending">Enviando…</ng-container>
    </button>
  </form>

  <!-- éxito (cuando el backend responde 204) -->
  <div class="ok" *ngIf="sent && !rateLimited" i18n="@@forgot.success">
    Si el email existe, te enviamos un enlace para restablecer la contraseña.
    Revisá tu bandeja de entrada y Spam.
  </div>

  <!-- rate limit (429 con { code:'FORGOT_RATE_LIMIT', minutes }) -->
  <div class="err" *ngIf="rateLimited" i18n="@@forgot.rateLimited">
    Debes esperar {{ rateLimitMin }} minutos antes de volver a pedir el enlace.
  </div>

  <!-- error genérico -->
  <div class="err" *ngIf="!rateLimited && errorMsg">
    {{ errorMsg }}
  </div>
</div>
